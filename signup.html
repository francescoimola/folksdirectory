<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0" />
  <title>Sign up - folks.directory</title>
  <meta name="title" content="Sign up - folks.directory" />
  <meta name="description"
    content="Sign up to receive updates and opportunities from Folkestone's creative community" />
  <meta name="keywords"
    content="directory, folkestone, yellow pages, creatives, artists, designers, makers, south kent, collaboration, community, kent, newsletter" />
  <meta name="robots" content="index, follow" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="language" content="English" />
  <meta name="author" content="folks.directory" />

  <!-- Social Media Meta Tags -->
  <meta property="og:url" content="https://folks.directory/signup" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Sign up - folks.directory" />
  <meta property="og:description"
    content="Sign up to receive updates and opportunities from Folkestone's creative community." />
  <meta property="og:image" content="/banner.png" />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="Folks" />
  <link rel="manifest" href="/site.webmanifest" />

  <!-- Fonts and CSS -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Schibsted+Grotesk:ital,wght@0,400..900;1,400..900&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- Skip to main content link for keyboard users -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Top Header Content -->
  <div class="content-wrapper no-border pad-sides pad-bottom pad-top">
    <header class="short-width center">
      <h1>üå± Join folks.directory</h1>
    </header>

    <main class="pad-top" id="main-content">
      <section class="short-width center">
        <p>
          Before you add your card to the Rolodex, leave us your name and email below. We'll match it to your card, then contact you to review your listing before it goes live.
        </p>

        <p class="pad-bottom">Not here from the A-Z Creatives Rolodex? Learn about the directory <a href="/about.html">here</a>. </p>
        <div id="form-message" class="form-message" role="alert"></div>

        <form id="signup-form" class="form-container pad-bottom">
          <div class="form-field">
            <label for="firstName">First name</label>
            <input type="text" id="firstName" name="firstName" required />
          </div>

          <div class="form-field">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" required />
          </div>

          <div class="form-field checkbox-field">
            <label>
              <input type="checkbox" id="privacyConsent" name="privacyConsent" required />
              I'd like to receive updates and understand how my data is handled according to the <a href="/policy.html" target="_blank">Privacy Notice</a>.
            </label>
          </div>

          <button type="submit" class="submit-button" id="submit-button">
            Sign up
          </button>
        </form>
      </section>
    </main>

    <footer class="short-width center pad-top">
      <p><strong>Proudly independent</strong></p>
      <p>A free, public directory of creatives who live or work in Folkestone. Built with ‚ô• by Folkestonians, for
        Folkestonians.
      </p>
      <p style="margin-top: 1rem">
        <a href="/">‚Üê Back home</a> |
        <a href="/policy.html">Privacy Policy</a> |
        <a href="https://airtable.com/appftAzWfZUvVVuJj/pagxtnf48FNoayS4o/form" target="_blank"
          rel="noopener noreferrer">Join the directory</a>
      </p>
    </footer>
  </div>

  <nav class="floating-nav" aria-label="Site navigation">
    <a href="/">Home</a>
    <a href="/explore.html">Directory</a>
    <a href="/events.html">Events</a>
    <a href="/about.html">About</a>
  </nav>

  <script>
    const form = document.getElementById('signup-form');
    const messageDiv = document.getElementById('form-message');
    const submitButton = document.getElementById('submit-button');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Disable submit button
      submitButton.disabled = true;
      submitButton.textContent = 'Signing up...';

      // Clear previous messages
      messageDiv.className = 'form-message';
      messageDiv.textContent = '';

      // Get form data
      const formData = new FormData(form);
      const email = formData.get('email');
      const firstName = formData.get('firstName');

      // Prepare the request body
      const formBody = `email=${encodeURIComponent(email)}&firstName=${encodeURIComponent(firstName)}`;

      try {
        const response = await fetch('https://app.loops.so/api/newsletter-form/cmb7z34545wr2zl0j0s2ht0l8', {
          method: 'POST',
          body: formBody,
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
          },
        });

        if (response.ok) {
          // Success
          messageDiv.className = 'form-message success';
          messageDiv.textContent = 'Done! Now add a folks.directory sticker to your card and pop it in the Rolodex. Expect a reply within 4-6 weeks.';
        } else {
          // Error from server
          messageDiv.className = 'form-message error';
          messageDiv.textContent = 'Mmm, something\'s not right. Please try again.';
        }
      } catch (error) {
        // Network error
        messageDiv.className = 'form-message error';
        messageDiv.textContent = 'Unable to connect. It could be your internet connection, but it\'s probably our fault. Please try again later.';
      } finally {
        // Re-enable submit button
        submitButton.disabled = false;
        submitButton.textContent = 'Sign up';
      }
    });
  </script>
</body>

</html>
